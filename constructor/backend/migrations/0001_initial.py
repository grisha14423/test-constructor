# Generated by Django 4.2.5 on 2023-10-09 08:49

from django.conf import settings
from django.db import migrations, models
import django.db.models.deletion
import simple_history.models
import uuid


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='CountedAttrFormula',
            fields=[
                ('id', models.AutoField(primary_key=True, serialize=False)),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False)),
                ('author_id', models.CharField(max_length=125)),
                ('created_date', models.DateTimeField(auto_now_add=True)),
                ('active', models.BooleanField(default=False)),
                ('attr_formulas', models.CharField(max_length=250)),
                ('description', models.CharField(max_length=250)),
                ('sql_query', models.TextField(blank=True, null=True)),
                ('nested_level', models.IntegerField()),
            ],
            options={
                'verbose_name': 'counted_attr_formula',
                'db_table': 'counted_attr_formula',
            },
        ),
        migrations.CreateModel(
            name='CountedAttributes',
            fields=[
                ('id', models.AutoField(primary_key=True, serialize=False)),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False)),
                ('author_id', models.CharField(max_length=125)),
                ('created_date', models.DateTimeField(auto_now_add=True)),
                ('active', models.BooleanField(default=False)),
                ('name_counted_attr', models.CharField(max_length=125)),
            ],
            options={
                'verbose_name': 'counted_attribute',
                'db_table': 'counted_attributes',
            },
        ),
        migrations.CreateModel(
            name='CsvAttributes',
            fields=[
                ('id', models.AutoField(primary_key=True, serialize=False)),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False)),
                ('author_id', models.CharField(max_length=125)),
                ('created_date', models.DateTimeField(auto_now_add=True)),
                ('inn', models.IntegerField()),
                ('np_name', models.CharField(max_length=125)),
                ('report_date', models.DateTimeField()),
                ('on_uch_date', models.DateTimeField()),
                ('status_egrn', models.CharField(max_length=125)),
                ('foreign_uchred', models.BooleanField(default=False, null=True)),
                ('nedostov', models.IntegerField()),
                ('sr_chis_thisyear', models.FloatField(null=True)),
                ('sr_chis_lastyear', models.FloatField(null=True)),
                ('bznaper_thisyear', models.FloatField(null=True)),
                ('bznaper_lastyear', models.FloatField(null=True)),
                ('postup_thisyear', models.FloatField(null=True)),
                ('postup_lastyear', models.FloatField(null=True)),
                ('dolg', models.FloatField(null=True)),
                ('dolg_overdue', models.FloatField(null=True)),
                ('npo_2_020_year', models.FloatField(null=True)),
                ('npo_2_030_year', models.FloatField(null=True)),
                ('npo_2_040_year', models.FloatField(null=True)),
                ('npo_2_010_year', models.FloatField(null=True)),
                ('npo_2_020_thisyear', models.FloatField(null=True)),
                ('npo_2_020_lastyear', models.FloatField(null=True)),
                ('npo_2_060_year', models.FloatField(null=True)),
                ('npo_2_060_thisyear', models.FloatField(null=True)),
                ('npo_2_060_lastyear', models.FloatField(null=True)),
                ('npo_4_010', models.FloatField(null=True)),
                ('npo_5_060', models.FloatField(null=True)),
                ('nds_3_190_thisyear', models.FloatField(null=True)),
                ('nds_3_190_lastyear', models.FloatField(null=True)),
                ('nds_3_125_thisyear', models.FloatField(null=True)),
                ('nds_3_125_lastyear', models.FloatField(null=True)),
                ('s_1150_4', models.FloatField(null=True)),
                ('s_1100_4', models.FloatField(null=True)),
                ('s_1210_4', models.FloatField(null=True)),
                ('s_1230_4', models.FloatField(null=True)),
                ('s_1230_5', models.FloatField(null=True)),
                ('s_1240_4', models.FloatField(null=True)),
                ('s_1250_4', models.FloatField(null=True)),
                ('s_1200_4', models.FloatField(null=True)),
                ('s_1600_4', models.FloatField(null=True)),
                ('s_1600_5', models.FloatField(null=True)),
                ('s_1600_4_2yearago', models.FloatField(null=True)),
                ('s_1600_5_2yearago', models.FloatField(null=True)),
                ('s_1310_4', models.FloatField(null=True)),
                ('s_1300_4', models.FloatField(null=True)),
                ('s_1300_5', models.FloatField(null=True)),
                ('s_1410_4', models.FloatField(null=True)),
                ('s_1450_4', models.FloatField(null=True)),
                ('s_1400_4', models.FloatField(null=True)),
                ('s_1510_4', models.FloatField(null=True)),
                ('s_1520_4', models.FloatField(null=True)),
                ('s_1520_5', models.FloatField(null=True)),
                ('s_1530_4', models.FloatField(null=True)),
                ('s_1550_4', models.FloatField(null=True)),
                ('s_1500_4', models.FloatField(null=True)),
                ('s_2110_4', models.FloatField(null=True)),
                ('s_2110_5', models.FloatField(null=True)),
                ('s_2120_4', models.FloatField(null=True)),
                ('s_2200_4', models.FloatField(null=True)),
                ('s_2210_4', models.FloatField(null=True)),
                ('s_2220_4', models.FloatField(null=True)),
                ('s_2310_4', models.FloatField(null=True)),
                ('s_2320_4', models.FloatField(null=True)),
                ('s_2330_4', models.FloatField(null=True)),
                ('s_2340_4', models.FloatField(null=True)),
                ('s_2350_4', models.FloatField(null=True)),
                ('s_2410_4', models.FloatField(null=True)),
                ('s_2400_4', models.FloatField(null=True)),
                ('s_2400_5', models.FloatField(null=True)),
                ('s_2400_4_2yearago', models.FloatField(null=True)),
                ('s_2400_5_2yearago', models.FloatField(null=True)),
                ('s_3600_3', models.FloatField(null=True)),
                ('s_3600_5', models.FloatField(null=True)),
                ('disqual_uchred', models.BooleanField(default=False, null=True)),
                ('m_11', models.BooleanField(default=False, null=True)),
                ('m_11_percent', models.FloatField(null=True)),
                ('m_2', models.BooleanField(default=False, null=True)),
                ('start_ball', models.CharField(max_length=125)),
                ('vnp_conduct', models.BooleanField(default=False, null=True)),
                ('high_risk_contr_sum', models.FloatField(null=True)),
                ('razryv_1stlink_sum', models.FloatField(null=True)),
                ('subsidiary_risk', models.BooleanField(default=False, null=True)),
                ('challenge_risk', models.BooleanField(default=False, null=True)),
                ('settle_3part_sum', models.FloatField(null=True)),
                ('efrsdul_lender', models.BooleanField(default=False, null=True)),
                ('efrsdul_deptor', models.BooleanField(default=False, null=True)),
                ('bankruptcy_procedure_bool', models.BooleanField(default=False, null=True)),
                ('bankruptcy_procedure', models.CharField(max_length=250)),
                ('bs_pay_bool', models.BooleanField(default=False, null=True)),
                ('stop_pay', models.BooleanField(default=False, null=True)),
                ('art46_over3month', models.BooleanField(default=False, null=True)),
                ('enforce_ntfinish_sum', models.FloatField(null=True)),
                ('enforce_ntfinish_sum_wthtax', models.FloatField(null=True)),
                ('account_balance_SKUAD', models.FloatField(null=True)),
                ('pru_cad_cost_amt', models.FloatField(null=True)),
                ('pru_cad_cost_amt_6monthago', models.FloatField(null=True)),
                ('lru_cad_cost_amt', models.FloatField(null=True)),
                ('lru_cad_cost_amt_6monthago', models.FloatField(null=True)),
                ('ts_cad_cost_amt', models.FloatField(null=True)),
                ('cad_cost_amt_inpledge', models.FloatField(null=True)),
                ('cad_cost_amt_inpledge_last', models.FloatField(null=True)),
                ('cad_cost_amt_inpledge_6monthago', models.FloatField(null=True)),
                ('stcontract_amount', models.FloatField(null=True)),
                ('subsidy_sum', models.FloatField(null=True)),
                ('recovery_initiation', models.BooleanField(default=False, null=True)),
                ('lastdate_operation', models.DateTimeField(default=False, null=True)),
                ('restruct_sum', models.FloatField(null=True)),
                ('early_term_restruct', models.BooleanField(default=False, null=True)),
                ('nwp_russia', models.FloatField(null=True)),
                ('bznaper_year', models.FloatField(null=True)),
                ('sr_chis_year', models.FloatField(null=True)),
                ('sr_chis_3month', models.FloatField(null=True)),
                ('sr_chis_6month', models.FloatField(null=True)),
                ('sr_chis_9month', models.FloatField(null=True)),
                ('sr_chis_12month', models.FloatField(null=True)),
                ('address_change', models.BooleanField(default=False, null=True)),
                ('on_reestr_unscrup_post', models.BooleanField(default=False, null=True)),
                ('high_risk_contr_relation', models.BooleanField(default=False, null=True)),
                ('auto_chain', models.BooleanField(default=False, null=True)),
                ('transit_1day_contr', models.BooleanField(default=False, null=True)),
                ('export_lastyear', models.FloatField(null=True)),
                ('export_thisyear', models.FloatField(null=True)),
                ('nds_3_130_thisyear', models.FloatField(null=True)),
                ('nds_3_130_lastyear', models.FloatField(null=True)),
                ('on_reestr_benef', models.BooleanField(default=False, null=True)),
                ('razryv_2stlink_sum', models.FloatField(null=True)),
                ('challenge_risk_sum', models.FloatField(null=True)),
                ('tax_burden', models.FloatField(null=True)),
                ('ru_tax_burden', models.FloatField(null=True)),
                ('p033001', models.FloatField(null=True)),
            ],
            options={
                'verbose_name': 'csv_attribute',
                'db_table': 'csv_attributes',
            },
        ),
        migrations.CreateModel(
            name='FileAttributes',
            fields=[
                ('id', models.AutoField(primary_key=True, serialize=False)),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False)),
                ('author_id', models.CharField(max_length=125)),
                ('created_date', models.DateTimeField(auto_now_add=True)),
                ('filename', models.FileField(upload_to='store/')),
            ],
            options={
                'verbose_name': 'file_attribute',
                'db_table': 'file_attributes',
            },
        ),
        migrations.CreateModel(
            name='InnRes',
            fields=[
                ('id', models.AutoField(primary_key=True, serialize=False)),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False)),
                ('author_id', models.CharField(max_length=125)),
                ('created_date', models.DateTimeField(auto_now_add=True)),
                ('active', models.BooleanField(default=False)),
                ('inn', models.IntegerField()),
                ('result_score', models.IntegerField()),
            ],
            options={
                'verbose_name': 'inn_re',
                'db_table': 'inn_res',
            },
        ),
        migrations.CreateModel(
            name='MainCatalog',
            fields=[
                ('id', models.AutoField(primary_key=True, serialize=False)),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False)),
                ('author_id', models.CharField(max_length=125)),
                ('created_date', models.DateTimeField(auto_now_add=True)),
                ('date_from', models.DateTimeField(null=True)),
                ('origin_name', models.CharField(blank=True, max_length=250)),
                ('description', models.CharField(blank=True, max_length=250)),
                ('active', models.BooleanField(default=False)),
            ],
            options={
                'verbose_name': 'main_catalog',
                'db_table': 'main_catalog',
            },
        ),
        migrations.CreateModel(
            name='ScoringModelHistory',
            fields=[
                ('id', models.IntegerField(blank=True, db_index=True)),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False)),
                ('author_id', models.CharField(max_length=125)),
                ('created_date', models.DateTimeField(blank=True, editable=False, verbose_name='created_date')),
                ('version', models.IntegerField()),
                ('active', models.BooleanField(default=False)),
                ('model_name', models.CharField(blank=True, max_length=250)),
                ('status', models.CharField(choices=[('DF', 'Draft'), ('AP', 'Approved')], default='DF', max_length=2)),
                ('description', models.CharField(blank=True, max_length=250)),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.CharField(max_length=100, null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
                ('history_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='+', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'historical scoring_model',
                'verbose_name_plural': 'historical scoring_models',
                'db_table': 'scoring_model_history',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='ScoringModel',
            fields=[
                ('id', models.AutoField(primary_key=True, serialize=False)),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False)),
                ('author_id', models.CharField(max_length=125)),
                ('created_date', models.DateTimeField(auto_now_add=True, verbose_name='created_date')),
                ('version', models.IntegerField()),
                ('active', models.BooleanField(default=False)),
                ('model_name', models.CharField(blank=True, max_length=250)),
                ('status', models.CharField(choices=[('DF', 'Draft'), ('AP', 'Approved')], default='DF', max_length=2)),
                ('description', models.CharField(blank=True, max_length=250)),
            ],
            options={
                'verbose_name': 'scoring_model',
                'db_table': 'scoring_model',
                'indexes': [models.Index(fields=['status', 'created_date'], name='scoring_mod_status_1178c6_idx')],
            },
        ),
        migrations.CreateModel(
            name='MainCatalogFields',
            fields=[
                ('id', models.AutoField(primary_key=True, serialize=False)),
                ('uuid', models.UUIDField(default=uuid.uuid4, editable=False)),
                ('author_id', models.CharField(max_length=125)),
                ('created_date', models.DateTimeField(auto_now_add=True)),
                ('date_from', models.DateTimeField(null=True)),
                ('date_to', models.DateTimeField(null=True)),
                ('filed_name', models.CharField(blank=True, max_length=250)),
                ('description', models.CharField(blank=True, max_length=250)),
                ('origin', models.CharField(blank=True, max_length=250)),
                ('active', models.BooleanField(default=False)),
                ('main_catalog_id', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='backend.maincatalog')),
            ],
            options={
                'verbose_name': 'main_catalog_filed',
                'db_table': 'main_catalog_fileds',
            },
        ),
        migrations.AddIndex(
            model_name='maincatalog',
            index=models.Index(fields=['origin_name', 'created_date'], name='main_catalo_origin__c632a4_idx'),
        ),
        migrations.AddField(
            model_name='innres',
            name='scoring_model',
            field=models.ManyToManyField(to='backend.scoringmodel'),
        ),
        migrations.AddIndex(
            model_name='fileattributes',
            index=models.Index(fields=['created_date'], name='file_attrib_created_621805_idx'),
        ),
        migrations.AddField(
            model_name='csvattributes',
            name='file_id',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='backend.fileattributes'),
        ),
        migrations.AddField(
            model_name='countedattributes',
            name='scoring_name',
            field=models.ManyToManyField(to='backend.scoringmodel'),
        ),
        migrations.AddField(
            model_name='countedattrformula',
            name='cntd_attr_id',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='backend.countedattributes'),
        ),
        migrations.AddIndex(
            model_name='maincatalogfields',
            index=models.Index(fields=['filed_name', 'created_date'], name='main_catalo_filed_n_976f44_idx'),
        ),
        migrations.AddIndex(
            model_name='innres',
            index=models.Index(fields=['inn', 'created_date'], name='inn_res_inn_5769c8_idx'),
        ),
        migrations.AddIndex(
            model_name='csvattributes',
            index=models.Index(fields=['inn', 'created_date', 'report_date'], name='csv_attribu_inn_b61acb_idx'),
        ),
        migrations.AddIndex(
            model_name='countedattributes',
            index=models.Index(fields=['name_counted_attr', 'created_date'], name='counted_att_name_co_405d20_idx'),
        ),
        migrations.AddIndex(
            model_name='countedattrformula',
            index=models.Index(fields=['attr_formulas', 'created_date'], name='counted_att_attr_fo_63c9d8_idx'),
        ),
    ]
